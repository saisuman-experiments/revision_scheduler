{"ast":null,"code":"import{data}from\"../Data/Data\";import{useState,useEffect}from\"react\";import'./Main.css';import SubmitPage from\"./SubmitPage\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Main(){const[selectedDateTo,setselectedDateTo]=useState(\"\");const[selectedDateFrom,setselectedDateFrom]=useState(\"\");const[frequencyList,setFL]=useState([]);useEffect(()=>{const fetchData=async()=>{try{const response=await axios.get('http://localhost:5000/api/data');// setData(response.data);\nconsole.log(response);}catch(error){console.error('Error fetching data:',error);}};fetchData();},[]);useEffect(()=>{data.map(d=>{let fd=new Date(d.startDate);// Create a copy of the input date to avoid modifying the original\nfd.setDate(fd.getDate()+7*d.firstRevision);let sd=new Date(d.startDate);// Create a copy of the input date to avoid modifying the original\nsd.setDate(sd.getDate()+7*d.secondRevision);// Add 14 days to the date\n//   return result;\n//  let fd=new Date(d.startDate).getDate()+7*d.firstRevision;\n//  let sd=new Date(d.startDate).getDate()+7*d.secondRevision;\nd.fd=fd;d.sd=sd;});// console.log(data);\n},[]);function showTpc(){if(selectedDateTo!==\"\"&&selectedDateFrom!==\"\"){let a=[];let b=[];a=data.filter(d=>{let fd=new Date(d.fd);fd.setDate(fd.getDate()+7);return new Date(d.fd)>=new Date(selectedDateTo)&&new Date(selectedDateFrom)>=new Date(d.fd);});b=data.filter(d=>{let sd=new Date(d.sd);sd.setDate(sd.getDate()+7);return new Date(d.sd)>=new Date(selectedDateTo)&&new Date(selectedDateFrom)>=new Date(d.sd);});let c=new Set([...a,...b]);let d=[...c];const today=new Date();console.log(today);console.log(d);d.forEach(e=>{e.due={fd:new Date(e.fd).toDateString()===today.toDateString()?'highlight':\"\",sd:new Date(e.sd).toDateString()===today.toDateString()?'highlight':\"\"};});setFL([...d]);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"This is main page\"}),/*#__PURE__*/_jsx(SubmitPage,{}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDateTo,onChange:e=>{setselectedDateTo(e.target.value);setselectedDateFrom(\"\");}}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDateFrom,min:selectedDateTo,onChange:e=>{setselectedDateFrom(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:showTpc,className:\"buttonContainer\",children:\"Show Topics\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Topic\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Revision\"}),/*#__PURE__*/_jsx(\"th\",{children:\"1st Revision\"}),/*#__PURE__*/_jsx(\"th\",{children:\"2nd Revision\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:frequencyList.length>0&&frequencyList.map(f=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:f.tpc}),/*#__PURE__*/_jsx(\"td\",{children:new Date(f.startDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:f.due.fd,children:f.fd.toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:f.due.sd,children:f.sd.toLocaleDateString()})]}))})]}),!frequencyList.length>0&&/*#__PURE__*/_jsx(\"div\",{children:\"No Topics found\"})]});}","map":{"version":3,"names":["data","useState","useEffect","SubmitPage","axios","jsx","_jsx","jsxs","_jsxs","Main","selectedDateTo","setselectedDateTo","selectedDateFrom","setselectedDateFrom","frequencyList","setFL","fetchData","response","get","console","log","error","map","d","fd","Date","startDate","setDate","getDate","firstRevision","sd","secondRevision","showTpc","a","b","filter","c","Set","today","forEach","e","due","toDateString","className","children","type","value","onChange","target","min","onClick","length","f","tpc","toLocaleDateString"],"sources":["C:/Users/machi/Documents/React/test/Revision/my-app/src/components/Main/Main.js"],"sourcesContent":["import { data } from \"../Data/Data\"\r\nimport {useState ,useEffect} from \"react\";\r\nimport './Main.css';\r\nimport SubmitPage from \"./SubmitPage\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Main(){\r\n    const [selectedDateTo,setselectedDateTo]=useState(\"\");\r\n    const [selectedDateFrom,setselectedDateFrom]=useState(\"\");\r\n    const [frequencyList,setFL]=useState([]);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n          try {\r\n            const response = await axios.get('http://localhost:5000/api/data');\r\n           // setData(response.data);\r\n            console.log(response);\r\n          } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n          }\r\n        };\r\n    \r\n        fetchData();\r\n      }, []);\r\n    \r\n     useEffect(()=>{\r\n        data.map((d)=>{\r\n            let fd = new Date(d.startDate);  // Create a copy of the input date to avoid modifying the original\r\n  fd.setDate(fd.getDate() + 7*d.firstRevision); \r\n  let sd = new Date(d.startDate);  // Create a copy of the input date to avoid modifying the original\r\n  sd.setDate(sd.getDate() + 7*d.secondRevision);\r\n  // Add 14 days to the date\r\n//   return result;\r\n//  let fd=new Date(d.startDate).getDate()+7*d.firstRevision;\r\n//  let sd=new Date(d.startDate).getDate()+7*d.secondRevision;\r\n  d.fd=fd;\r\n  d.sd=sd;\r\n        });\r\n       // console.log(data);\r\n\r\n     },[]);\r\n   \r\n   \r\n    function showTpc(){\r\n        if(selectedDateTo!==\"\" && selectedDateFrom!==\"\"){\r\n       let a=[];\r\n       let b=[];\r\n             a=data.filter((d)=>{\r\n                let fd = new Date(d.fd); \r\n                fd.setDate(fd.getDate() + 7); \r\n                return new Date(d.fd)>=new Date (selectedDateTo) && new Date (selectedDateFrom)>=new Date(d.fd);\r\n               \r\n            });\r\n\r\n\r\n\r\n            \r\n            \r\n             b=data.filter((d)=>{\r\n                let sd = new Date(d.sd); \r\n                sd.setDate(sd.getDate() + 7); \r\n                return new Date(d.sd)>=new Date (selectedDateTo) && new Date (selectedDateFrom)>=new Date(d.sd);\r\n               \r\n            });\r\n\r\n            let c=new Set([...a,...b]);\r\n            let d=[...c];\r\n            const today = new Date();\r\nconsole.log(today);\r\nconsole.log(d);\r\n            d.forEach((e)=>{\r\n                e.due={\r\n                    fd: new Date(e.fd).toDateString()===today.toDateString()?'highlight':\"\",\r\n                    sd: new Date(e.sd).toDateString()===today.toDateString()?'highlight':\"\",\r\n\r\n                };\r\n                \r\n            })\r\n            \r\n            setFL([...d]);\r\n           \r\n                }\r\n    }\r\n\r\n\r\n    return(<div className=\"container\">\r\n    <h1>This is main page</h1>\r\n    <SubmitPage></SubmitPage>\r\n\r\n    {/* <button onClick={handleSubmit}>Submit</button> */}\r\n\r\n      <input \r\n        type=\"date\" \r\n        value={selectedDateTo}\r\n        onChange={(e)=>{\r\n            setselectedDateTo(e.target.value);\r\n            setselectedDateFrom(\"\");\r\n           }} \r\n      />\r\n      \r\n      <input \r\n        type=\"date\" \r\n        value={selectedDateFrom}\r\n        min={selectedDateTo}\r\n        onChange={(e)=>{\r\n            setselectedDateFrom(e.target.value);\r\n        }} \r\n      />\r\n\r\n      <button onClick={showTpc} className=\"buttonContainer\">Show Topics</button>\r\n      <table>\r\n        <thead>\r\n        <tr>\r\n                <th>Topic</th>\r\n                <th>Last Revision</th>\r\n                <th>1st Revision</th>\r\n                <th>2nd Revision</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n        {frequencyList.length>0 && frequencyList.map((f)=>\r\n    \r\n    <tr>\r\n        <td>{f.tpc}</td>\r\n        <td>{new Date(f.startDate).toLocaleDateString()}</td>\r\n        <td className={f.due.fd}>{f.fd.toLocaleDateString()}</td>\r\n        <td className={f.due.sd}>{f.sd.toLocaleDateString()}</td>\r\n    </tr>\r\n    \r\n\r\n    )}\r\n        </tbody>\r\n      </table>\r\n     \r\n\r\n    {!frequencyList.length>0 && <div>No Topics found</div>}\r\n\r\n    \r\n    </div>)\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}