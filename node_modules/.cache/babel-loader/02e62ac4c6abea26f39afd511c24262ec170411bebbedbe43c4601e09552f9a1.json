{"ast":null,"code":"import{data}from\"../Data/Data\";import{useState,useEffect}from\"react\";import'./Main.css';import SubmitPage from\"./SubmitPage\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Main(){let navigate=useNavigate();const[selectedDateTo,setselectedDateTo]=useState(\"\");const[selectedDateFrom,setselectedDateFrom]=useState(\"\");const[frequencyList,setFL]=useState([]);const[data,setData]=useState();useEffect(()=>{fetch('http://localhost:5000/api/data').then(response=>response.json()).then(data=>{//  console\nsetData(data);// Set the fetched data into the state\n}).catch(error=>{console.error('Error fetching data:',error);// Handle errors\n});},[]);console.log(data);//  useEffect(()=>{\nif(data!==undefined){data.map(d=>{let fd=new Date(d.startDate);// Create a copy of the input date to avoid modifying the original\nfd.setDate(fd.getDate()+7*d.firstRevision);let sd=new Date(d.startDate);// Create a copy of the input date to avoid modifying the original\nsd.setDate(sd.getDate()+7*d.secondRevision);// Add 14 days to the date\n//   return result;\n//  let fd=new Date(d.startDate).getDate()+7*d.firstRevision;\n//  let sd=new Date(d.startDate).getDate()+7*d.secondRevision;\nd.fd=fd;d.sd=sd;});}// console.log(data);\n//  },[data]);\nfunction showTpc(){if(selectedDateTo!==\"\"&&selectedDateFrom!==\"\"){let a=[];let b=[];a=data.filter(d=>{let fd=new Date(d.fd);fd.setDate(fd.getDate()+7);return new Date(d.fd)>=new Date(selectedDateTo)&&new Date(selectedDateFrom)>=new Date(d.fd);});b=data.filter(d=>{let sd=new Date(d.sd);sd.setDate(sd.getDate()+7);return new Date(d.sd)>=new Date(selectedDateTo)&&new Date(selectedDateFrom)>=new Date(d.sd);});let c=new Set([...a,...b]);let d=[...c];const today=new Date();console.log(today);console.log(d);d.forEach(e=>{e.due={fd:new Date(e.fd).toDateString()===today.toDateString()?'highlight':\"\",sd:new Date(e.sd).toDateString()===today.toDateString()?'highlight':\"\"};});setFL([...d]);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"This is main page\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDateTo,onChange:e=>{setselectedDateTo(e.target.value);setselectedDateFrom(\"\");}}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDateFrom,min:selectedDateTo,onChange:e=>{setselectedDateFrom(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:showTpc,className:\"buttonContainer\",children:\"Show Topics\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigate(\"/\");},className:\"buttonContainer\",children:\"Back\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Topic\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Revision\"}),/*#__PURE__*/_jsx(\"th\",{children:\"1st Revision\"}),/*#__PURE__*/_jsx(\"th\",{children:\"2nd Revision\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:frequencyList.length>0&&frequencyList.map(f=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:f.tpc}),/*#__PURE__*/_jsx(\"td\",{children:new Date(f.startDate).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:f.due.fd,children:f.fd.toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:f.due.sd,children:f.sd.toLocaleDateString()})]}))})]}),!frequencyList.length>0&&/*#__PURE__*/_jsx(\"div\",{children:\"No Topics found\"})]});}","map":{"version":3,"names":["data","useState","useEffect","SubmitPage","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Main","navigate","selectedDateTo","setselectedDateTo","selectedDateFrom","setselectedDateFrom","frequencyList","setFL","setData","fetch","then","response","json","catch","error","console","log","undefined","map","d","fd","Date","startDate","setDate","getDate","firstRevision","sd","secondRevision","showTpc","a","b","filter","c","Set","today","forEach","e","due","toDateString","className","children","type","value","onChange","target","min","onClick","length","f","tpc","toLocaleDateString"],"sources":["C:/Users/machi/Documents/React/test/Revision/my-app/src/components/Main/Main.js"],"sourcesContent":["import { data } from \"../Data/Data\"\r\nimport {useState ,useEffect} from \"react\";\r\nimport './Main.css';\r\n\r\nimport SubmitPage from \"./SubmitPage\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Main(){\r\n    let navigate=useNavigate();\r\n    const [selectedDateTo,setselectedDateTo]=useState(\"\");\r\n    const [selectedDateFrom,setselectedDateFrom]=useState(\"\");\r\n    const [frequencyList,setFL]=useState([]);\r\n    const [data,setData]=useState();\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:5000/api/data')\r\n          .then(response => response.json())\r\n          .then(data => {\r\n          //  console\r\n            setData(data); // Set the fetched data into the state\r\n          })\r\n          .catch(error => {\r\n            console.error('Error fetching data:', error); // Handle errors\r\n          });\r\n      }, []);\r\n    \r\n      console.log(data);\r\n    //  useEffect(()=>{\r\n        if(data!==undefined){\r\n        data.map((d)=>{\r\n            let fd = new Date(d.startDate);  // Create a copy of the input date to avoid modifying the original\r\n  fd.setDate(fd.getDate() + 7*d.firstRevision); \r\n  let sd = new Date(d.startDate);  // Create a copy of the input date to avoid modifying the original\r\n  sd.setDate(sd.getDate() + 7*d.secondRevision);\r\n  // Add 14 days to the date\r\n//   return result;\r\n//  let fd=new Date(d.startDate).getDate()+7*d.firstRevision;\r\n//  let sd=new Date(d.startDate).getDate()+7*d.secondRevision;\r\n  d.fd=fd;\r\n  d.sd=sd;\r\n        });\r\n    }\r\n       // console.log(data);\r\n\r\n    //  },[data]);\r\n   \r\n   \r\n    function showTpc(){\r\n        if(selectedDateTo!==\"\" && selectedDateFrom!==\"\"){\r\n       let a=[];\r\n       let b=[];\r\n             a=data.filter((d)=>{\r\n                let fd = new Date(d.fd); \r\n                fd.setDate(fd.getDate() + 7); \r\n                return new Date(d.fd)>=new Date (selectedDateTo) && new Date (selectedDateFrom)>=new Date(d.fd);\r\n               \r\n            });\r\n\r\n\r\n\r\n            \r\n            \r\n             b=data.filter((d)=>{\r\n                let sd = new Date(d.sd); \r\n                sd.setDate(sd.getDate() + 7); \r\n                return new Date(d.sd)>=new Date (selectedDateTo) && new Date (selectedDateFrom)>=new Date(d.sd);\r\n               \r\n            });\r\n\r\n            let c=new Set([...a,...b]);\r\n            let d=[...c];\r\n            const today = new Date();\r\nconsole.log(today);\r\nconsole.log(d);\r\n            d.forEach((e)=>{\r\n                e.due={\r\n                    fd: new Date(e.fd).toDateString()===today.toDateString()?'highlight':\"\",\r\n                    sd: new Date(e.sd).toDateString()===today.toDateString()?'highlight':\"\",\r\n\r\n                };\r\n                \r\n            })\r\n            \r\n            setFL([...d]);\r\n           \r\n                }\r\n    }\r\n\r\n\r\n    return(<div className=\"container\">\r\n    <h1>This is main page</h1>\r\n    {/* <SubmitPage></SubmitPage> */}\r\n\r\n    {/* <button onClick={handleSubmit}>Submit</button> */}\r\n\r\n      <input \r\n        type=\"date\" \r\n        value={selectedDateTo}\r\n        onChange={(e)=>{\r\n            setselectedDateTo(e.target.value);\r\n            setselectedDateFrom(\"\");\r\n           }} \r\n      />\r\n      \r\n      <input \r\n        type=\"date\" \r\n        value={selectedDateFrom}\r\n        min={selectedDateTo}\r\n        onChange={(e)=>{\r\n            setselectedDateFrom(e.target.value);\r\n        }} \r\n      />\r\n\r\n      <button onClick={showTpc} className=\"buttonContainer\">Show Topics</button>\r\n      <button onClick={()=>{navigate(\"/\")}} className=\"buttonContainer\">Back</button>\r\n      <table>\r\n        <thead>\r\n        <tr>\r\n                <th>Topic</th>\r\n                <th>Last Revision</th>\r\n                <th>1st Revision</th>\r\n                <th>2nd Revision</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n        {frequencyList.length>0 && frequencyList.map((f)=>\r\n    \r\n    <tr>\r\n        <td>{f.tpc}</td>\r\n        <td>{new Date(f.startDate).toLocaleDateString()}</td>\r\n        <td className={f.due.fd}>{f.fd.toLocaleDateString()}</td>\r\n        <td className={f.due.sd}>{f.sd.toLocaleDateString()}</td>\r\n    </tr>\r\n    \r\n\r\n    )}\r\n        </tbody>\r\n      </table>\r\n     \r\n\r\n    {!frequencyList.length>0 && <div>No Topics found</div>}\r\n\r\n    \r\n    </div>)\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}